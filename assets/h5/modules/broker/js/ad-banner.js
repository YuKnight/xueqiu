define(function(require,exports,module){module.exports={init:function(e,n){return $(".ad-banner").length?!1:(this.getData(),void this.bindEvent(e,n))},getData:function(){var e=this;xqBridge.request({url:"/advertise/banner/show.json",data:{type:1},success:function(n){n.image&&!n.closed&&e.render(n)}})},render:function(e){var n='<div class="ad-banner"><img src="'+e.image+'" data-url="'+e.link+'" data-id="'+e.id+'"><div class="close-container"><span class="ad-banner-close"></span></div></div>',i=$(n);$(".markets").length?($(".markets").css({top:"50px"}).next().css({marginTop:"90px"}),i.css({height:"50px",width:"100%",position:"fixed",display:"none",top:0,zIndex:5})):i.css({height:"50px",width:"100%","margin-bottom":"10px",position:"relative",display:"none"}),$("#container").css({position:"relative",height:$(window).height()}),$("body").prepend(i),i.slideDown("fast"),$(".ad-banner img").css({height:"50px",width:"100%"}),$(".ad-banner-close").css({display:"inline-block",position:"absolute",left:"10px",top:"5px",width:"15px",height:"15px","background-image":"url(./images/close_icon.png)","background-size":"15px 15px",opacity:"0.2"}),$(".close-container").css({width:"30px",height:"50px",position:"absolute",right:"0px",top:"0px"})},bindEvent:function(e,n){$("body").on("click",".close-container",function(){n&&window.xqBridge&&xqBridge.trackEvent(n);var e=$(".ad-banner img").data("id");xqBridge.request({url:"/advertise/banner/close.json",type:"POST",data:{banner_id:e},success:function(e){e.success&&($(".ad-banner").hide(),$(".markets").length&&$(".markets").css({top:0}).next().css({marginTop:"40px"}))}})}),$("body").on("click",".ad-banner img",function(){n&&window.xqBridge&&xqBridge.trackEvent(e);var i=$(this).data("url");xqBridge.redirect({type:"MODAL",url:i})})}}});