$(function(){function r(r){xqBridge.hideLoading();var t="请求出错";"string"==typeof r?t=r:r&&r.error_description&&(t=r.error_description),Util.showError(t)}function t(){$(".withdraw-container").hide(),$(".success").show()}var i=Util.parseParams(),n=i.amount,o=i.openid;$(".wx-user").html(i.name),$(".withdraw-amount").attr("placeholder","可提"+n+"（最少1元）"),$(".withdraw-all").on("click",function(){$(".withdraw-amount").val(n)}),$(".withdraw-amount").on("input",function(){var r=$.trim($(this).val()),t=r.split("."),i=t[1];i&&i.length>2&&(i=i.substr(0,2),t[1]=i,this.value=t.join("."))}),$(".submit").on("click",function(){var i=$.trim($(".withdraw-amount").val());return i?1>i?(Util.showError("至少1元"),!1):void xqBridge.request({url:"/tc/snowpay/withdraw/apply.json",type:"POST",data:{verify_code:"",real_name:"",card_no:o,amount:i,openBank:"weixin"},success:function(r){0==r.success?Util.showError(r.message):t()},error:function(t){r(t)}}):(Util.showError("请输入提现金额"),!1)}),$(".done").on("click",function(){xqBridge.redirect({type:"POP"})}),$(".withdraw").on("click",function(){$(".withdraw-amount").focus()})});