$(function(){function e(e){var t="";return t+='<li data-cellid="'+e.id+'" data-bindurl="'+e.url+'"><div class="pic"><img src="'+e.image_url+'"></div><div class="content"><div class="name">'+e.name+'</div><div class="desc">'+e.desc+'</div></div><img src="images/arrow.png"><div class="content-detail"><a class="amount">'+e.detail+"<span>"+e.unit+"</span></a></div></li>"}function t(t){var i={snow_money:{id:"snow_money",name:"余额",url:"/wallet/balance",desc:"",detail:"",unit:"元",image_url:"images/icon_wallet_balance@2x.png"},snow_coin:{id:"snow_coin",name:"雪球币",url:"http://xueqiu.com/wallet/snow-coin",desc:"",detail:"",unit:"雪球币",image_url:"images/icon_wallet_snowcoin@2x.png"}},n="";$.each(i,function(s){var o=i[s];o.detail=t[s],"snow_money"==s&&(o.detail=parseFloat(o.detail/100).toFixed(2)),n+=e(o)}),$(".assets-list").html(n),$(".assets-list li").each(function(){""==$(this).find(".desc").text()&&$(this).find(".name").css("padding-top","8px")}),$(".assets").css("display","block")}function i(){xqBridge.request({url:"/tc/snowpay/wallet/merge.json",type:"GET",data:{},success:function(e){e&&(e.coupon=0,xqBridge.request({url:"/tc/snowx/reward/owner/remind/query.json",success:function(i){"60000"===i.result_code&&i.result_data&&(e.coupon=i.result_data.active_count),e.coupon&&delete e.coupon,t(e)},error:function(){t(e)}}))},error:function(){n.show("获取数据出错")},complete:function(){}})}var n={show:function(e){"use strict";var t=$(".toast");t.length>0?(t.show(),setTimeout(function(){t.hide()},3e3)):(t=$("<div class='toast'>"+e+"</div>"),$("body").append(t),t.css({backgroundColor:"rgba(0,0,0,0.6)",fontSize:"12px",borderRadius:"5px",position:"fixed",bottom:"15%",left:"15%",color:"#fff",padding:"10px",display:"none",zIndex:"9999",textAlign:"center",width:"70%",marginLeft:"-10px"}),t.show(),setTimeout(function(){t.hide()},3e3))},hide:function(){"use strict";$(".toast").length>0&&$(".toast").hide()}};i(),window.viewDidAppear=function(){i()},$(".assets-list").on("click","li",function(){var e=$(this).data("bindurl");return xqBridge.redirect({url:e,type:"PUSH"}),!1})});