define(function(require,exports,module){var e,i=1;module.exports={init:function(){var e=this;e.showMore(),$(window).bind("scroll",function(){e.loadMore()})},randerItem:function(e){var i,r=moment(parseInt(e.created_at)).format("YYYY-MM-DD HH:mm"),t=parseFloat(e.snow_coin),n=t.formatMoney(2,".",",");i=t>0?'<div class="amount-positive">+'+n+"</div>":'<div class="amount-negative">'+n+"</div>";var o='<li data-id="'+e.id+'"><div class="arrow-left"><p class="bill-name">'+e.name+'</p><p class="bill-createdAt">'+r+"</p></div>"+i+"</div>";return o},renderOrderList:function(r){var t=this,n=r.list;i=r.page,e=r.maxPage;var o="";_.each(n,function(e){o+=t.randerItem(e)}),$(".bill-list").append(o)},showMore:function(){var e=this;xqBridge.request({url:"/userbills/list.json",type:"GET",data:{page:i++},success:function(i){e.renderOrderList(i)},error:function(e){Util.showError(e)}})},loadMore:function(){var r=this;$(window).scrollTop()+$(window).height()>=$(document).height()&&e!=i&&r.showMore()}}});